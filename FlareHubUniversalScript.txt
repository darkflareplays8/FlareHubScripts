-- üî• FlareHub - PERFECT LIFT OFF + NO FLOATING
local Rayfield = loadstring(game:HttpGet('https://sirius.menu/rayfield'))()

local Window = Rayfield:CreateWindow({
   Name = "üî• FlareHub",
   LoadingTitle = "FlareHub",
   LoadingSubtitle = "Noclip ‚Ä¢ Fly ‚Ä¢ ESP ‚Ä¢ Walkspeed",
   ConfigurationSaving = {
      Enabled = true,
      FolderName = "FlareHub",
      FileName = "FlareConfig"
   },
   Discord = { Enabled = false },
   KeySystem = false
})

local Tab = Window:CreateTab("Main", 4483362458)

local player = game:GetService("Players").LocalPlayer
local RunService = game:GetService("RunService")

-- Test button
Tab:CreateButton({
   Name = "‚úÖ Test GUI",
   Callback = function() end,
})

-- Noclip
Tab:CreateToggle({
   Name = "‚ú® Noclip",
   CurrentValue = false,
   Flag = "NoclipToggle",
   Callback = function(Value)
      getgenv().NoclipEnabled = Value
      if Value then
         getgenv().NoclipConnection = RunService.Stepped:Connect(function()
            if player.Character then
               for _, part in pairs(player.Character:GetDescendants()) do
                  if part:IsA("BasePart") and part.Name ~= "HumanoidRootPart" then
                     part.CanCollide = false
                  end
               end
            end
         end)
      else if getgenv().NoclipConnection then getgenv().NoclipConnection:Disconnect() end
      end
   end,
})

-- Fly Speed
Tab:CreateSlider({
   Name = "Fly Speed",
   Range = {50, 300},
   Increment = 10,
   CurrentValue = 100,
   Flag = "FlySpeedSlider",
   Callback = function(Value) getgenv().FlySpeed = Value end,
})

-- PERFECT FLY (Lifts off + stays still)
Tab:CreateToggle({
   Name = "üïäÔ∏è Fly",
   CurrentValue = false,
   Flag = "FlyToggle",
   Callback = function(Value)
      getgenv().FlyEnabled = Value
      local character = player.Character or player.CharacterAdded:Wait()
      local humanoid = character:WaitForChild("Humanoid")
      local rootPart = character:WaitForChild("HumanoidRootPart")
      
      if Value then
         humanoid.PlatformStand = true
         
         -- INSTANT LIFT OFF
         rootPart.CFrame = rootPart.CFrame + Vector3.new(0, 10, 0)
         
         local bodyVelocity = Instance.new("BodyVelocity")
         bodyVelocity.MaxForce = Vector3.new(4000, 4000, 4000)
         bodyVelocity.Velocity = Vector3.new(0, 0, 0)
         bodyVelocity.Parent = rootPart
         
         local bodyGyro = Instance.new("BodyGyro")
         bodyGyro.MaxTorque = Vector3.new(4000, 4000, 4000)
         bodyGyro.P = 3000
         bodyGyro.D = 500
         bodyGyro.CFrame = rootPart.CFrame
         bodyGyro.Parent = rootPart
         
         getgenv().FlyBodyVelocity = bodyVelocity
         getgenv().FlyBodyGyro = bodyGyro
         
         getgenv().FlyConnection = RunService.Heartbeat:Connect(function()
            if not rootPart.Parent then return end
            
            local moveDir = humanoid.MoveDirection
            local speed = getgenv().FlySpeed or 100
            
            if moveDir.Magnitude > 0.05 then
               -- RESPONSIVE MOVEMENT
               local moveVector = Vector3.new(moveDir.X * speed, 0, moveDir.Z * speed)
               bodyVelocity.Velocity = rootPart.CFrame:VectorToWorldSpace(moveVector)
            else
               -- NO INPUT = PERFECT HOVER (no physics interference)
               bodyVelocity.Velocity = Vector3.new(0, 0, 0)
            end
            
            bodyGyro.CFrame = rootPart.CFrame
         end)
         
      else
         humanoid.PlatformStand = false
         if getgenv().FlyBodyVelocity then getgenv().FlyBodyVelocity:Destroy() end
         if getgenv().FlyBodyGyro then getgenv().FlyBodyGyro:Destroy() end
         if getgenv().FlyConnection then getgenv().FlyConnection:Disconnect() end
      end
   end,
})

-- Walkspeed
Tab:CreateSlider({
   Name = "Walkspeed",
   Range = {16, 200},
   Increment = 1,
   CurrentValue = 16,
   Flag = "WalkspeedSlider",
   Callback = function(Value)
      local humanoid = player.Character and player.Character:FindFirstChild("Humanoid")
      if humanoid then humanoid.WalkSpeed = Value end
   end,
})

-- ESP Section
local ESPSection = Tab:CreateSection("üëÅÔ∏è ESP Settings")
